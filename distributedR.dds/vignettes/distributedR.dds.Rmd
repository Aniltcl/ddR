---
title: "distributedR.dds examples"
author: "Edward Ma"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

Quick examples using distributedR.dds with the API

Starting it up:
```{r}
library(distributedR.dds)
useBackend(distributedR)
```

Init'ing a DList:
```{r}
a <- dlist(nparts=5)
a <- dmapply(function(x) { list(3) }, parts(a))
collect(a)
```

Note that we had to use `parts(a)` instead of just `a` for now. Also, we needed to do an `dmapply` to initialize data inside of a. Since this is distributed R, which has strict type safety, we had to make sure each dlist partitition got a list, so we couldn't just return `3`, but `list(3)`.

Some other operations:

Adding 1 to first partition of `a`, 2 to the second, etc.
```{r}
b <- dmapply(function(x,y) { list(x[[1]] + y ) }, parts(a), y = as.list(1:5))
collect(b)
```

Adding `a` to `b`, then subtracting a constant value
```{r}
addThenSubtract <- function(x,y,z) {
  list(x[[1]] + y[[1]] - z)
}
c <- dmapply(addThenSubtract,parts(a),parts(b),MoreArgs=list(z=5))
collect(c)
```

Pulling only two parts from each `a` and `b`, and one part from `c` and using them together:
```{r}
d <- dmapply(addThenSubtract,parts(a,1:2),parts(b,c(2,4)),MoreArgs=list(z=collect(c,1)[[1]]))
collect(d)
```

For a more detailed example, you may view (and run) example_mat_mul.R (matrix multiplication) in the top-level directory.
